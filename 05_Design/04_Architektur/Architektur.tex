\section{Architektur}

\section{Systemübersicht}

\section{Logische Architektur}
\begin{itemize}
	\item services: Web-Schnittstelle (RESTful)
	\item genericapi: Abstraktion für Compute, Storage und Network
	\item util: Tools zur Bearbeitung von Configfiles
	\item presistence: OR-Mapping
\end{itemize}

\begin{center}
\includegraphics[width=\textwidth]{./05_Design/04_Architektur/LogischeSicht}
\end{center}

\newpage

\section{Klassenstruktur}

\subsection{services}

In der Schicht services wird die RestAPI implementiert.

\begin{center}
\includegraphics[width=\textwidth]{./05_Design/04_Architektur/services}
\end{center}

\subsection{domain}

Die Domain beinhaltet die Entitäten, die mittels OR-Mapper mit der Datenbank synchronisiert werden.
Der Workflow erstellt/löscht einen Service.

\begin{center}
\includegraphics[width=\textwidth]{./05_Design/04_Architektur/domain}
\end{center}

\subsection{GenericAPI}
\subsubsection{ServiceModuleHandler}
Der ServiceModuleHandler entscheidet an welchen ResourceController ein ServiceModule/Identifier übergeben wird.
Der Entscheidungsalgorithmus kann auf verschiedenste Weise implementiert werden, deshalb gibt es ein Interface.

\subsubsection{ResourceController}
Der ResourceController ist eine Abstraktion eines Controllers, die nicht auf irgendwelche Bibliotheksabhängigkeiten (z.B. LibVirt, JClouds) eingeht und lediglich dem ServiceModuleHandler die nötigen Informationen anbietet.

\subsubsection{LibVirtController}
Der LibVirtController ist eine weitere Abstraktion eines Controllers, die aber speziell einer Bibliothek (in diesem Fall LibVirt) zugewiesen ist. Die Klasse kümmert sich um die Instanziierung und kann, wenn nötig, Helfermethoden anbieten.

\subsubsection{LibVirt<category>Controller}

Die konkrete Klasse des Controllers implementiert nur noch die abstrakten Methoden des ResourceControllers.

\includegraphics[width=\textwidth]{./05_Design/04_Architektur/genericapi}

\subsection{persistence}

Wird durch OR Mapper (Hibernate) vorgenommen, dieser mappt die Java Objekte auf 
die Datenbank.

\section{Dependency Injection}

Die GenericAPI ist relativ komplex ausgefallen und kann erweitert werden. Um unnötigen Code in den oberen Schichten zu vermeiden, wird die GenericAPI mit Hilfe von Dependency Injection aufgesetzt. Es ist möglich in einem XML die gesamte GenericAPI nach belieben zusammenzusetzen.

\section{Deployment}

\includegraphics[width=\textwidth]{./05_Design/04_Architektur/deployment}

\section{Persistierung}

\includegraphics[width=\textwidth]{./05_Design/04_Architektur/Datenmodell}

\section{Sequenzdiagramme}
\subsection{service bestellen}

\begin{center}
\includegraphics[width=\textwidth]{./05_Design/04_Architektur/orderService}
\end{center}
